diff -Naurp u-boot-2009.08/common/cmd_nor.c u-boot-2009.08.new/common/cmd_nor.c
--- u-boot-2009.08/common/cmd_nor.c	2010-03-05 21:09:48.000000000 -0600
+++ u-boot-2009.08.new/common/cmd_nor.c	2010-03-05 21:06:48.000000000 -0600
@@ -60,10 +60,8 @@ int do_nor(cmd_tbl_t * cmdtp, int flag, 
       if (argc < 3)
 		   goto usage1;
 
-		if (strcmp(argv[2], "kernel") == 0) {
-         printf("\nNOR Write Kernel..\n ");
-
-		   puts("\nU-Boot -- Writing NOR Partition into flash\n");
+	if (strcmp(argv[2], "kernel") == 0) {
+                   printf("\nNOR Write Kernel..\n ");
 
 		   nor_write_partition(argv[2]) ;
 
@@ -71,15 +69,21 @@ int do_nor(cmd_tbl_t * cmdtp, int flag, 
 
       }
       else if (strcmp(argv[2], "rootfs") == 0) {
-         printf("\nNOR Write rootfs.. ");
-
-		   puts("\nU-Boot -- Writing NOR Partition into flash\n");
+                   printf("\nNOR Write rootfs.. ");
 
 		   nor_write_partition(argv[2]) ;
 
 		   puts("\nU-Boot -- Writing NOR flash.....Done\n");
 
       }
+      else if (strcmp(argv[2], "appfs") == 0) {
+                   printf("\nNOR Write appfs.. ");
+
+                   nor_write_partition(argv[2]) ;
+
+                   puts("\nU-Boot -- Writing NOR flash.....Done\n");
+
+      }
       else {
    		if (argc < 4)
    			goto usage1;
@@ -145,6 +149,7 @@ U_BOOT_CMD(nor, CONFIG_SYS_MAXARGS, 1, d
 	"nor erase off size\n"
 	"nor write kernel\n"
 	"nor write rootfs\n"
+	"nor write appfs\n"
 	"addr - RAM address where Image is copied\n"			
 	"off  - Image offset in Flash\n"			
 	"size - Size of Image to be copied\n"				
diff -Naurp u-boot-2009.08/lib_arm/flash.c u-boot-2009.08.new/lib_arm/flash.c
--- u-boot-2009.08/lib_arm/flash.c	2010-03-05 21:09:48.000000000 -0600
+++ u-boot-2009.08.new/lib_arm/flash.c	2010-03-05 21:08:28.000000000 -0600
@@ -189,10 +189,16 @@ void nor_write_partition(char * partitio
    }
    else if (strcmp(partition, "rootfs") == 0)
    {
-      uFlashAddr = ROOTFS_IMAGE_FLASH_OFFSET;
-      uErasesize = ROOTFS_IMAGE_MTD_LENGTH;
+        uFlashAddr = ROOTFS_IMAGE_FLASH_OFFSET;
+        uErasesize = ROOTFS_IMAGE_MTD_LENGTH;
 	clean_marker = TRUE;
    }
+   else if (strcmp(partition, "appfs") == 0)
+   {
+        uFlashAddr = APPFS_IMAGE_FLASH_OFFSET;
+        uErasesize = APPFS_IMAGE_MTD_LENGTH;
+        clean_marker = TRUE;
+   }
    else
    {
       printf(" unknown command option . \n");
diff -Naurp u-boot-2009.08/lib_arm/bootm.c u-boot-2009.08.new/lib_arm/bootm.c
--- u-boot-2009.08/lib_arm/bootm.c	2010-03-06 11:40:16.000000000 -0600
+++ u-boot-2009.08.new/lib_arm/bootm.c	2010-03-06 11:37:00.000000000 -0600
@@ -342,12 +342,9 @@ void  patch_ataglist( void )
       {
               *tmp1++ = *tmp++;
       }
-        *tmp1++ = 0x0;
-        *tmp1++ = 0x0;
-        *tmp1++ = 0x0;
-        *tmp1++ = 0x0;
-        *tmp1++ = 0x0;
-        *tmp1++ = 0x0;
+
+      
+      for( i = 0; i<11; i++)
         *tmp1++ = 0x0;
    }
    
diff -Naurp u-boot-2009.08/include/configs/vpe_apollo.h u-boot-2009.08.new/include/configs/vpe_apollo.h
--- u-boot-2009.08/include/configs/vpe_apollo.h	2010-03-14 22:10:07.000000000 -0500
+++ u-boot-2009.08.new/include/configs/vpe_apollo.h	2010-03-14 21:48:39.000000000 -0500
@@ -286,7 +286,7 @@ xxx
 #if 1
 #define CONFIG_BOOTARGS "noinitrd " \
 	"console=ttyS1,115200n8 "\
-	"mtdparts=nx_2016:1m(boot),5m(kernel),32m(root),-(extra) " \
+	"mtdparts=nx_2016:1536k@0k(boot),5m@1536k(kernel),32m@7m(root),32m@39m(appfs),-(extra) " \
 	"root=/dev/mtdblock2 rw " \
 	"rootfstype=jffs2"
 #endif	
